<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Carrito</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#f5f5f5;padding:20px}
.card{background:#fff;padding:20px;border-radius:12px;margin-bottom:20px}
.item{display:flex;align-items:center;justify-content:space-between;margin:8px 0}
.item img{width:50px;height:50px;object-fit:cover;border-radius:6px}
input,select{width:100%;padding:8px;margin-top:8px}
button{
 background:#25D366;color:#fff;
 padding:12px;border:none;
 border-radius:8px;font-weight:bold;
 cursor:pointer;margin-top:15px
}
</style>
</head>

<body onload="cargar()">

<h2>üõí Carrito</h2>

<div class="card" id="lista"></div>

<div class="card">
<h3>üöö Env√≠o</h3>
<select id="envio" onchange="calcular()">
 <option value="0">Retiro - $0</option>
 <option value="3">Local - $3</option>
 <option value="5">Domicilio - $5</option>
</select>

<h3>üë§ Datos</h3>
<input id="nombre" placeholder="Nombre">
<input id="cedula" placeholder="C√©dula">
<input id="direccion" placeholder="Direcci√≥n">

<h3>üí≥ Pago</h3>
<select id="pago">
 <option>Tarjeta</option>
 <option>Transferencia</option>
 <option>Dep√≥sito</option>
</select>

<input id="comprobante" placeholder="N¬∞ comprobante">
<input id="banco" placeholder="Banco / Cuenta">
<input id="valor" placeholder="Valor pagado">

<p><b>Subtotal:</b> $<span id="sub">0</span></p>
<p><b>Env√≠o:</b> $<span id="env">0</span></p>
<p><b>Total:</b> $<span id="tot">0</span></p>

<button onclick="enviar()">Enviar pedido por WhatsApp</button>
</div>

<script>
let carrito=JSON.parse(localStorage.getItem("carritoNOBOL"))||[];

function cargar(){
 lista.innerHTML="";
 let subtotal=0;
 carrito.forEach((p,i)=>{
  subtotal+=p.precio;
  lista.innerHTML+=`
   <div class="item">
    <img src="${p.imagen}">
    ${p.nombre} $${p.precio}
    <button onclick="eliminar(${i})">‚ùå</button>
   </div>`;
 });
 sub.innerText=subtotal.toFixed(2);
 calcular();
}

function eliminar(i){
 carrito.splice(i,1);
 localStorage.setItem("carritoNOBOL",JSON.stringify(carrito));
 cargar();
}

function calcular(){
 let s=parseFloat(sub.innerText);
 let e=parseFloat(envio.value);
 env.innerText=e;
 tot.innerText=(s+e).toFixed(2);
}

function enviar(){
 let msg="üõí Pedido DeTodoYa NOBOL%0A";
 carrito.forEach(p=>msg+=`‚Ä¢ ${p.nombre} $${p.precio}%0A`);
 msg+=`Total: $${tot.innerText}%0A`;
 msg+=`Cliente: ${nombre.value}%0A`;
 msg+=`Direcci√≥n: ${direccion.value}%0A`;
 msg+=`Pago: ${pago.value}%0A`;
 msg+=`Comprobante: ${comprobante.value}%0A`;
 msg+=`Banco: ${banco.value}%0A`;
 msg+=`Valor: ${valor.value}`;

 window.open("https://wa.me/593963660301?text="+msg,"_blank");
}
</script>

</body>
</html>
